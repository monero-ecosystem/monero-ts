"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _assert = _interopRequireDefault(require("assert"));
var _GenUtils = _interopRequireDefault(require("../../common/GenUtils"));
var _MoneroBlockHeader = _interopRequireDefault(require("./MoneroBlockHeader"));
var _MoneroTx = _interopRequireDefault(require("./MoneroTx"));
var _MoneroTxQuery = _interopRequireDefault(require("../../wallet/model/MoneroTxQuery"));
var _MoneroTxWallet = _interopRequireDefault(require("../../wallet/model/MoneroTxWallet"));

/**
 * Enumerates types to deserialize to.
 */var
DeserializationType = /*#__PURE__*/function (DeserializationType) {DeserializationType[DeserializationType["TX"] = 0] = "TX";DeserializationType[DeserializationType["TX_WALLET"] = 1] = "TX_WALLET";DeserializationType[DeserializationType["TX_QUERY"] = 2] = "TX_QUERY";return DeserializationType;}(DeserializationType || {});





/**
 * Models a Monero block in the blockchain.
 */
class MoneroBlock extends _MoneroBlockHeader.default {

  static DeserializationType = DeserializationType;






  constructor(block, txType) {
    super(block);

    // copy miner tx
    if (this.minerTx) {
      this.minerTx = this.deserializeTx(this.minerTx, txType).setBlock(this);
    }

    // copy non-miner txs
    if (this.txs) {
      this.txs = this.txs.slice();
      for (let i = 0; i < this.txs.length; i++) {
        this.txs[i] = this.deserializeTx(this.txs[i], txType).setBlock(this);
      }
    }
  }

  getHex() {
    return this.hex;
  }

  setHex(hex) {
    this.hex = hex;
    return this;
  }

  getMinerTx() {
    return this.minerTx;
  }

  setMinerTx(minerTx) {
    this.minerTx = minerTx;
    return this;
  }

  getTxs() {
    return this.txs;
  }

  setTxs(txs) {
    this.txs = txs;
    return this;
  }

  getTxHashes() {
    return this.txHashes;
  }

  setTxHashes(txHashes) {
    this.txHashes = txHashes;
    return this;
  }

  copy() {
    return new MoneroBlock(this);
  }

  toJson() {
    let json = super.toJson();
    if (this.getMinerTx() !== undefined) json.minerTx = this.getMinerTx().toJson();
    if (this.getTxs() !== undefined) {
      json.txs = [];
      for (let tx of this.getTxs()) json.txs.push(tx.toJson());
    }
    return json;
  }

  merge(block) {
    (0, _assert.default)(block instanceof MoneroBlock);
    if (this === block) return this;

    // merge header fields
    super.merge(block);

    // merge reconcilable block extensions
    this.setHex(_GenUtils.default.reconcile(this.getHex(), block.getHex()));
    this.setTxHashes(_GenUtils.default.reconcile(this.getTxHashes(), block.getTxHashes()));

    // merge miner tx
    if (this.getMinerTx() === undefined) this.setMinerTx(block.getMinerTx());
    if (block.getMinerTx() !== undefined) {
      block.getMinerTx().setBlock(this);
      this.getMinerTx().merge(block.getMinerTx());
    }

    // merge non-miner txs
    if (block.getTxs() !== undefined) {
      for (let tx of block.getTxs()) {
        tx.setBlock(this);
        MoneroBlock.mergeTx(this.getTxs(), tx);
      }
    }

    return this;
  }

  toString(indent = 0) {
    let str = super.toString(indent) + "\n";
    str += _GenUtils.default.kvLine("Hex", this.getHex(), indent);
    if (this.getTxs() !== undefined) {
      str += _GenUtils.default.kvLine("Txs", "", indent);
      for (let tx of this.getTxs()) {
        str += tx.toString(indent + 1) + "\n";
      }
    }
    if (this.getMinerTx() !== undefined) {
      str += _GenUtils.default.kvLine("Miner tx", "", indent);
      str += this.getMinerTx().toString(indent + 1) + "\n";
    }
    str += _GenUtils.default.kvLine("Txs hashes", this.getTxHashes(), indent);
    return str[str.length - 1] === "\n" ? str.slice(0, str.length - 1) : str; // strip last newline
  }

  // helper to merge txs
  static mergeTx(txs, tx) {
    for (let aTx of txs) {
      if (aTx.getHash() === tx.getHash()) {
        aTx.merge(tx);
        return;
      }
    }
    txs.push(tx);
  }

  // -------------------- OVERRIDE COVARIANT RETURN TYPES ---------------------

  setHeight(height) {
    super.setHeight(height);
    return this;
  }

  setTimestamp(timestamp) {
    super.setTimestamp(timestamp);
    return this;
  }

  setSize(size) {
    super.setSize(size);
    return this;
  }

  setWeight(weight) {
    super.setWeight(weight);
    return this;
  }

  setLongTermWeight(longTermWeight) {
    super.setLongTermWeight(longTermWeight);
    return this;
  }

  setDepth(depth) {
    super.setDepth(depth);
    return this;
  }

  setDifficulty(difficulty) {
    super.setDifficulty(difficulty);
    return this;
  }

  setCumulativeDifficulty(cumulativeDifficulty) {
    super.setCumulativeDifficulty(cumulativeDifficulty);
    return this;
  }

  setMajorVersion(majorVersion) {
    super.setMajorVersion(majorVersion);
    return this;
  }

  setMinorVersion(minorVersion) {
    super.setMinorVersion(minorVersion);
    return this;
  }

  setNonce(nonce) {
    super.setNonce(nonce);
    return this;
  }

  setMinerTxHash(minerTxHash) {
    super.setMinerTxHash(minerTxHash);
    return this;
  }

  setNumTxs(numTxs) {
    super.setNumTxs(numTxs);
    return this;
  }

  setOrphanStatus(orphanStatus) {
    super.setOrphanStatus(orphanStatus);
    return this;
  }

  setPrevHash(prevHash) {
    super.setPrevHash(prevHash);
    return this;
  }

  setReward(reward) {
    super.setReward(reward);
    return this;
  }

  setPowHash(powHash) {
    super.setPowHash(powHash);
    return this;
  }

  deserializeTx(tx, txType) {
    if (txType === undefined) {
      if (!(tx instanceof _MoneroTx.default)) throw new Error("Must provide DeserializationType if tx is not instanceof MoneroTx");
      return tx.copy();
    } else if (txType === MoneroBlock.DeserializationType.TX || txType === undefined) {
      return new _MoneroTx.default(tx);
    } else if (txType === MoneroBlock.DeserializationType.TX_WALLET) {
      return new _MoneroTxWallet.default(tx);
    } else if (txType === MoneroBlock.DeserializationType.TX_QUERY) {
      return new _MoneroTxQuery.default(tx);
    } else {
      throw new Error("Unrecognized tx deserialization type: " + txType);
    }
  }
}exports.default = MoneroBlock;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYXNzZXJ0IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfR2VuVXRpbHMiLCJfTW9uZXJvQmxvY2tIZWFkZXIiLCJfTW9uZXJvVHgiLCJfTW9uZXJvVHhRdWVyeSIsIl9Nb25lcm9UeFdhbGxldCIsIkRlc2VyaWFsaXphdGlvblR5cGUiLCJNb25lcm9CbG9jayIsIk1vbmVyb0Jsb2NrSGVhZGVyIiwiY29uc3RydWN0b3IiLCJibG9jayIsInR4VHlwZSIsIm1pbmVyVHgiLCJkZXNlcmlhbGl6ZVR4Iiwic2V0QmxvY2siLCJ0eHMiLCJzbGljZSIsImkiLCJsZW5ndGgiLCJnZXRIZXgiLCJoZXgiLCJzZXRIZXgiLCJnZXRNaW5lclR4Iiwic2V0TWluZXJUeCIsImdldFR4cyIsInNldFR4cyIsImdldFR4SGFzaGVzIiwidHhIYXNoZXMiLCJzZXRUeEhhc2hlcyIsImNvcHkiLCJ0b0pzb24iLCJqc29uIiwidW5kZWZpbmVkIiwidHgiLCJwdXNoIiwibWVyZ2UiLCJhc3NlcnQiLCJHZW5VdGlscyIsInJlY29uY2lsZSIsIm1lcmdlVHgiLCJ0b1N0cmluZyIsImluZGVudCIsInN0ciIsImt2TGluZSIsImFUeCIsImdldEhhc2giLCJzZXRIZWlnaHQiLCJoZWlnaHQiLCJzZXRUaW1lc3RhbXAiLCJ0aW1lc3RhbXAiLCJzZXRTaXplIiwic2l6ZSIsInNldFdlaWdodCIsIndlaWdodCIsInNldExvbmdUZXJtV2VpZ2h0IiwibG9uZ1Rlcm1XZWlnaHQiLCJzZXREZXB0aCIsImRlcHRoIiwic2V0RGlmZmljdWx0eSIsImRpZmZpY3VsdHkiLCJzZXRDdW11bGF0aXZlRGlmZmljdWx0eSIsImN1bXVsYXRpdmVEaWZmaWN1bHR5Iiwic2V0TWFqb3JWZXJzaW9uIiwibWFqb3JWZXJzaW9uIiwic2V0TWlub3JWZXJzaW9uIiwibWlub3JWZXJzaW9uIiwic2V0Tm9uY2UiLCJub25jZSIsInNldE1pbmVyVHhIYXNoIiwibWluZXJUeEhhc2giLCJzZXROdW1UeHMiLCJudW1UeHMiLCJzZXRPcnBoYW5TdGF0dXMiLCJvcnBoYW5TdGF0dXMiLCJzZXRQcmV2SGFzaCIsInByZXZIYXNoIiwic2V0UmV3YXJkIiwicmV3YXJkIiwic2V0UG93SGFzaCIsInBvd0hhc2giLCJNb25lcm9UeCIsIkVycm9yIiwiVFgiLCJUWF9XQUxMRVQiLCJNb25lcm9UeFdhbGxldCIsIlRYX1FVRVJZIiwiTW9uZXJvVHhRdWVyeSIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL21haW4vdHMvZGFlbW9uL21vZGVsL01vbmVyb0Jsb2NrLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhc3NlcnQgZnJvbSBcImFzc2VydFwiO1xuaW1wb3J0IEdlblV0aWxzIGZyb20gXCIuLi8uLi9jb21tb24vR2VuVXRpbHNcIjtcbmltcG9ydCBNb25lcm9CbG9ja0hlYWRlciBmcm9tIFwiLi9Nb25lcm9CbG9ja0hlYWRlclwiO1xuaW1wb3J0IE1vbmVyb1R4IGZyb20gXCIuL01vbmVyb1R4XCI7XG5pbXBvcnQgTW9uZXJvVHhRdWVyeSBmcm9tIFwiLi4vLi4vd2FsbGV0L21vZGVsL01vbmVyb1R4UXVlcnlcIjtcbmltcG9ydCBNb25lcm9UeFdhbGxldCBmcm9tIFwiLi4vLi4vd2FsbGV0L21vZGVsL01vbmVyb1R4V2FsbGV0XCI7XG5cbi8qKlxuICogRW51bWVyYXRlcyB0eXBlcyB0byBkZXNlcmlhbGl6ZSB0by5cbiAqL1xuZW51bSBEZXNlcmlhbGl6YXRpb25UeXBlIHtcbiAgVFggPSAwLFxuICBUWF9XQUxMRVQgPSAxLFxuICBUWF9RVUVSWSA9IDJcbn1cblxuLyoqXG4gKiBNb2RlbHMgYSBNb25lcm8gYmxvY2sgaW4gdGhlIGJsb2NrY2hhaW4uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vbmVyb0Jsb2NrIGV4dGVuZHMgTW9uZXJvQmxvY2tIZWFkZXIge1xuXG4gIHN0YXRpYyBEZXNlcmlhbGl6YXRpb25UeXBlID0gRGVzZXJpYWxpemF0aW9uVHlwZTtcblxuICBoZXg6IHN0cmluZztcbiAgbWluZXJUeDogTW9uZXJvVHg7XG4gIHR4czogTW9uZXJvVHhbXTtcbiAgdHhIYXNoZXM6IHN0cmluZ1tdO1xuXG4gIGNvbnN0cnVjdG9yKGJsb2NrPzogUGFydGlhbDxNb25lcm9CbG9jaz4sIHR4VHlwZT86IERlc2VyaWFsaXphdGlvblR5cGUpIHtcbiAgICBzdXBlcihibG9jayk7XG4gICAgXG4gICAgLy8gY29weSBtaW5lciB0eFxuICAgIGlmICh0aGlzLm1pbmVyVHgpIHtcbiAgICAgIHRoaXMubWluZXJUeCA9IHRoaXMuZGVzZXJpYWxpemVUeCh0aGlzLm1pbmVyVHgsIHR4VHlwZSkuc2V0QmxvY2sodGhpcyk7XG4gICAgfVxuICAgIFxuICAgIC8vIGNvcHkgbm9uLW1pbmVyIHR4c1xuICAgIGlmICh0aGlzLnR4cykge1xuICAgICAgdGhpcy50eHMgPSB0aGlzLnR4cy5zbGljZSgpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnR4cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLnR4c1tpXSA9IHRoaXMuZGVzZXJpYWxpemVUeCh0aGlzLnR4c1tpXSwgdHhUeXBlKS5zZXRCbG9jayh0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXRIZXgoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5oZXg7XG4gIH1cbiAgXG4gIHNldEhleChoZXg6IHN0cmluZyk6IE1vbmVyb0Jsb2NrIHtcbiAgICB0aGlzLmhleCA9IGhleDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgZ2V0TWluZXJUeCgpOiBNb25lcm9UeCB7XG4gICAgcmV0dXJuIHRoaXMubWluZXJUeDtcbiAgfVxuICBcbiAgc2V0TWluZXJUeChtaW5lclR4OiBNb25lcm9UeCk6IE1vbmVyb0Jsb2NrIHtcbiAgICB0aGlzLm1pbmVyVHggPSBtaW5lclR4O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBnZXRUeHMoKTogTW9uZXJvVHhbXSB7XG4gICAgcmV0dXJuIHRoaXMudHhzO1xuICB9XG4gIFxuICBzZXRUeHModHhzOiBNb25lcm9UeFtdKTogTW9uZXJvQmxvY2sge1xuICAgIHRoaXMudHhzID0gdHhzO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBnZXRUeEhhc2hlcygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIHRoaXMudHhIYXNoZXM7XG4gIH1cbiAgXG4gIHNldFR4SGFzaGVzKHR4SGFzaGVzOiBzdHJpbmdbXSk6IE1vbmVyb0Jsb2NrIHtcbiAgICB0aGlzLnR4SGFzaGVzID0gdHhIYXNoZXM7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIGNvcHkoKTogTW9uZXJvQmxvY2sge1xuICAgIHJldHVybiBuZXcgTW9uZXJvQmxvY2sodGhpcyk7XG4gIH1cbiAgXG4gIHRvSnNvbigpOiBhbnkge1xuICAgIGxldCBqc29uID0gc3VwZXIudG9Kc29uKCk7XG4gICAgaWYgKHRoaXMuZ2V0TWluZXJUeCgpICE9PSB1bmRlZmluZWQpIGpzb24ubWluZXJUeCA9IHRoaXMuZ2V0TWluZXJUeCgpLnRvSnNvbigpO1xuICAgIGlmICh0aGlzLmdldFR4cygpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGpzb24udHhzID0gW107XG4gICAgICBmb3IgKGxldCB0eCBvZiB0aGlzLmdldFR4cygpKSBqc29uLnR4cy5wdXNoKHR4LnRvSnNvbigpKTtcbiAgICB9XG4gICAgcmV0dXJuIGpzb247XG4gIH1cbiAgXG4gIG1lcmdlKGJsb2NrOiBNb25lcm9CbG9jayk6IE1vbmVyb0Jsb2NrIHtcbiAgICBhc3NlcnQoYmxvY2sgaW5zdGFuY2VvZiBNb25lcm9CbG9jayk7XG4gICAgaWYgKHRoaXMgPT09IGJsb2NrKSByZXR1cm4gdGhpcztcbiAgICBcbiAgICAvLyBtZXJnZSBoZWFkZXIgZmllbGRzXG4gICAgc3VwZXIubWVyZ2UoYmxvY2spO1xuICAgIFxuICAgIC8vIG1lcmdlIHJlY29uY2lsYWJsZSBibG9jayBleHRlbnNpb25zXG4gICAgdGhpcy5zZXRIZXgoR2VuVXRpbHMucmVjb25jaWxlKHRoaXMuZ2V0SGV4KCksIGJsb2NrLmdldEhleCgpKSk7XG4gICAgdGhpcy5zZXRUeEhhc2hlcyhHZW5VdGlscy5yZWNvbmNpbGUodGhpcy5nZXRUeEhhc2hlcygpLCBibG9jay5nZXRUeEhhc2hlcygpKSk7XG4gICAgXG4gICAgLy8gbWVyZ2UgbWluZXIgdHhcbiAgICBpZiAodGhpcy5nZXRNaW5lclR4KCkgPT09IHVuZGVmaW5lZCkgdGhpcy5zZXRNaW5lclR4KGJsb2NrLmdldE1pbmVyVHgoKSk7XG4gICAgaWYgKGJsb2NrLmdldE1pbmVyVHgoKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBibG9jay5nZXRNaW5lclR4KCkuc2V0QmxvY2sodGhpcyk7XG4gICAgICB0aGlzLmdldE1pbmVyVHgoKS5tZXJnZShibG9jay5nZXRNaW5lclR4KCkpO1xuICAgIH1cbiAgICBcbiAgICAvLyBtZXJnZSBub24tbWluZXIgdHhzXG4gICAgaWYgKGJsb2NrLmdldFR4cygpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGZvciAobGV0IHR4IG9mIGJsb2NrLmdldFR4cygpKSB7XG4gICAgICAgIHR4LnNldEJsb2NrKHRoaXMpO1xuICAgICAgICBNb25lcm9CbG9jay5tZXJnZVR4KHRoaXMuZ2V0VHhzKCksIHR4KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgdG9TdHJpbmcoaW5kZW50ID0gMCk6IHN0cmluZyB7XG4gICAgbGV0IHN0ciA9IHN1cGVyLnRvU3RyaW5nKGluZGVudCkgKyBcIlxcblwiO1xuICAgIHN0ciArPSBHZW5VdGlscy5rdkxpbmUoXCJIZXhcIiwgdGhpcy5nZXRIZXgoKSwgaW5kZW50KTtcbiAgICBpZiAodGhpcy5nZXRUeHMoKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBzdHIgKz0gR2VuVXRpbHMua3ZMaW5lKFwiVHhzXCIsIFwiXCIsIGluZGVudCk7XG4gICAgICBmb3IgKGxldCB0eCBvZiB0aGlzLmdldFR4cygpKSB7XG4gICAgICAgIHN0ciArPSB0eC50b1N0cmluZyhpbmRlbnQgKyAxKSArIFwiXFxuXCI7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmdldE1pbmVyVHgoKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBzdHIgKz0gR2VuVXRpbHMua3ZMaW5lKFwiTWluZXIgdHhcIiwgXCJcIiwgaW5kZW50KTtcbiAgICAgIHN0ciArPSB0aGlzLmdldE1pbmVyVHgoKS50b1N0cmluZyhpbmRlbnQgKyAxKSArIFwiXFxuXCI7XG4gICAgfVxuICAgIHN0ciArPSBHZW5VdGlscy5rdkxpbmUoXCJUeHMgaGFzaGVzXCIsIHRoaXMuZ2V0VHhIYXNoZXMoKSwgaW5kZW50KTtcbiAgICByZXR1cm4gc3RyW3N0ci5sZW5ndGggLSAxXSA9PT0gXCJcXG5cIiA/IHN0ci5zbGljZSgwLCBzdHIubGVuZ3RoIC0gMSkgOiBzdHIgIC8vIHN0cmlwIGxhc3QgbmV3bGluZVxuICB9XG4gIFxuICAvLyBoZWxwZXIgdG8gbWVyZ2UgdHhzXG4gIHByb3RlY3RlZCBzdGF0aWMgbWVyZ2VUeCh0eHMsIHR4KSB7XG4gICAgZm9yIChsZXQgYVR4IG9mIHR4cykge1xuICAgICAgaWYgKGFUeC5nZXRIYXNoKCkgPT09IHR4LmdldEhhc2goKSkge1xuICAgICAgICBhVHgubWVyZ2UodHgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHR4cy5wdXNoKHR4KTtcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tIE9WRVJSSURFIENPVkFSSUFOVCBSRVRVUk4gVFlQRVMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgc2V0SGVpZ2h0KGhlaWdodDogbnVtYmVyKTogTW9uZXJvQmxvY2sge1xuICAgIHN1cGVyLnNldEhlaWdodChoZWlnaHQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBzZXRUaW1lc3RhbXAodGltZXN0YW1wOiBudW1iZXIpOiBNb25lcm9CbG9jayB7XG4gICAgc3VwZXIuc2V0VGltZXN0YW1wKHRpbWVzdGFtcCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIHNldFNpemUoc2l6ZTogbnVtYmVyKTogTW9uZXJvQmxvY2sge1xuICAgIHN1cGVyLnNldFNpemUoc2l6ZSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIHNldFdlaWdodCh3ZWlnaHQ6IG51bWJlcik6IE1vbmVyb0Jsb2NrIHtcbiAgICBzdXBlci5zZXRXZWlnaHQod2VpZ2h0KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgc2V0TG9uZ1Rlcm1XZWlnaHQobG9uZ1Rlcm1XZWlnaHQ6IG51bWJlcik6IE1vbmVyb0Jsb2NrIHtcbiAgICBzdXBlci5zZXRMb25nVGVybVdlaWdodChsb25nVGVybVdlaWdodCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIHNldERlcHRoKGRlcHRoOiBudW1iZXIpOiBNb25lcm9CbG9jayB7XG4gICAgc3VwZXIuc2V0RGVwdGgoZGVwdGgpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBzZXREaWZmaWN1bHR5KGRpZmZpY3VsdHk6IGJpZ2ludCk6IE1vbmVyb0Jsb2NrIHtcbiAgICBzdXBlci5zZXREaWZmaWN1bHR5KGRpZmZpY3VsdHkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBzZXRDdW11bGF0aXZlRGlmZmljdWx0eShjdW11bGF0aXZlRGlmZmljdWx0eTogYmlnaW50KTogTW9uZXJvQmxvY2sge1xuICAgIHN1cGVyLnNldEN1bXVsYXRpdmVEaWZmaWN1bHR5KGN1bXVsYXRpdmVEaWZmaWN1bHR5KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgc2V0TWFqb3JWZXJzaW9uKG1ham9yVmVyc2lvbjogbnVtYmVyKTogTW9uZXJvQmxvY2sge1xuICAgIHN1cGVyLnNldE1ham9yVmVyc2lvbihtYWpvclZlcnNpb24pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBzZXRNaW5vclZlcnNpb24obWlub3JWZXJzaW9uOiBudW1iZXIpOiBNb25lcm9CbG9jayB7XG4gICAgc3VwZXIuc2V0TWlub3JWZXJzaW9uKG1pbm9yVmVyc2lvbik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIHNldE5vbmNlKG5vbmNlOiBudW1iZXIpOiBNb25lcm9CbG9jayB7XG4gICAgc3VwZXIuc2V0Tm9uY2Uobm9uY2UpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBzZXRNaW5lclR4SGFzaChtaW5lclR4SGFzaDogc3RyaW5nKTogTW9uZXJvQmxvY2sge1xuICAgIHN1cGVyLnNldE1pbmVyVHhIYXNoKG1pbmVyVHhIYXNoKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgc2V0TnVtVHhzKG51bVR4czogbnVtYmVyKTogTW9uZXJvQmxvY2sge1xuICAgIHN1cGVyLnNldE51bVR4cyhudW1UeHMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBzZXRPcnBoYW5TdGF0dXMob3JwaGFuU3RhdHVzOiBib29sZWFuKTogTW9uZXJvQmxvY2sge1xuICAgIHN1cGVyLnNldE9ycGhhblN0YXR1cyhvcnBoYW5TdGF0dXMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBzZXRQcmV2SGFzaChwcmV2SGFzaDogc3RyaW5nKTogTW9uZXJvQmxvY2sge1xuICAgIHN1cGVyLnNldFByZXZIYXNoKHByZXZIYXNoKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgc2V0UmV3YXJkKHJld2FyZDogYmlnaW50KTogTW9uZXJvQmxvY2sge1xuICAgIHN1cGVyLnNldFJld2FyZChyZXdhcmQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBzZXRQb3dIYXNoKHBvd0hhc2g6IHN0cmluZyk6IE1vbmVyb0Jsb2NrIHtcbiAgICBzdXBlci5zZXRQb3dIYXNoKHBvd0hhc2gpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHJvdGVjdGVkIGRlc2VyaWFsaXplVHgodHg6IGFueSwgdHhUeXBlPzogRGVzZXJpYWxpemF0aW9uVHlwZSk6IE1vbmVyb1R4IHtcbiAgICBpZiAodHhUeXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICghKHR4IGluc3RhbmNlb2YgTW9uZXJvVHgpKSB0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IHByb3ZpZGUgRGVzZXJpYWxpemF0aW9uVHlwZSBpZiB0eCBpcyBub3QgaW5zdGFuY2VvZiBNb25lcm9UeFwiKTtcbiAgICAgIHJldHVybiB0eC5jb3B5KCk7XG4gICAgfSBlbHNlIGlmICh0eFR5cGUgPT09IE1vbmVyb0Jsb2NrLkRlc2VyaWFsaXphdGlvblR5cGUuVFggfHwgdHhUeXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBuZXcgTW9uZXJvVHgodHgpO1xuICAgIH0gZWxzZSBpZiAodHhUeXBlID09PSBNb25lcm9CbG9jay5EZXNlcmlhbGl6YXRpb25UeXBlLlRYX1dBTExFVCkge1xuICAgICAgcmV0dXJuIG5ldyBNb25lcm9UeFdhbGxldCh0eCk7XG4gICAgfSBlbHNlIGlmICh0eFR5cGUgPT09IE1vbmVyb0Jsb2NrLkRlc2VyaWFsaXphdGlvblR5cGUuVFhfUVVFUlkpIHtcbiAgICAgIHJldHVybiBuZXcgTW9uZXJvVHhRdWVyeSh0eCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVucmVjb2duaXplZCB0eCBkZXNlcmlhbGl6YXRpb24gdHlwZTogXCIgKyB0eFR5cGUpO1xuICAgIH1cbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoieUxBQUEsSUFBQUEsT0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsU0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsa0JBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLFNBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLGNBQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElB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