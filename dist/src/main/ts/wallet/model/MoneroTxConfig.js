"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _assert = _interopRequireDefault(require("assert"));
var _MoneroDestination = _interopRequireDefault(require("./MoneroDestination"));
var _MoneroError = _interopRequireDefault(require("../../common/MoneroError"));

/**
 * Configures a transaction to send, sweep, or create a payment URI.
 */
class MoneroTxConfig {




















  /**
   * <p>Generic request to transfer funds from a wallet.</p>
   * 
   * <p>Example:</p>
   * 
   * <code>
   * let config1 = new MoneroTxConfig({<br>
   * &nbsp;&nbsp; accountIndex: 0,<br>
   * &nbsp;&nbsp; address: "59aZULsUF3YN...",<br>
   * &nbsp;&nbsp; amount: BigInt("500000"),<br>
   * &nbsp;&nbsp; priority: MoneroTxPriority.NORMAL,<br>
   * &nbsp;&nbsp; relay: true<br>
   * });
   * </code>
   * 
   * @param {Partial<MoneroTxConfig>} [config] - configures the transaction to create (optional)
   * @param {string} [config.address] - single destination address
   * @param {bigint} [config.amount] - single destination amount
   * @param {number} [config.accountIndex] - source account index to transfer funds from
   * @param {number} [config.subaddressIndex] - source subaddress index to transfer funds from
   * @param {number[]} [config.subaddressIndices] - source subaddress indices to transfer funds from
   * @param {boolean} [config.relay] - relay the transaction to peers to commit to the blockchain
   * @param {MoneroTxPriority} [config.priority] - transaction priority (default MoneroTxPriority.NORMAL)
   * @param {MoneroDestination[]} [config.destinations] - addresses and amounts in a multi-destination tx
   * @param {number[]} [config.subtractFeeFrom] - list of destination indices to split the transaction fee
   * @param {string} [config.paymentId] - transaction payment ID
   * @param {bigint} [config.unlockTime] - minimum height or timestamp for the transaction to unlock (default 0)
   * @param {string} [config.note] - transaction note saved locally with the wallet
   * @param {string} [config.recipientName] - recipient name saved locally with the wallet
   * @param {boolean} [config.canSplit] - allow funds to be transferred using multiple transactions
   * @param {bigint} [config.belowAmount] - for sweep requests, include outputs below this amount when sweeping wallet, account, subaddress, or all unlocked funds 
   * @param {boolean} [config.sweepEachSubaddress] - for sweep requests, sweep each subaddress individually instead of together if true
   * @param {string} [config.keyImage] - key image to sweep (ignored except in sweepOutput() requests)
   */
  constructor(config) {
    Object.assign(this, config);

    // deserialize bigints
    if (this.amount !== undefined && typeof this.amount !== "bigint") this.amount = BigInt(this.amount);
    if (this.fee !== undefined && typeof this.fee !== "bigint") this.fee = BigInt(this.fee);
    if (this.unlockTime !== undefined && typeof this.unlockTime !== "bigint") this.unlockTime = BigInt(this.unlockTime);
    if (this.belowAmount !== undefined && typeof this.belowAmount !== "bigint") this.belowAmount = BigInt(this.belowAmount);

    // copy destinations
    if (this.destinations) {
      (0, _assert.default)(this.address === undefined && this.amount === undefined, "Tx configuration may specify destinations or an address/amount but not both");
      this.setDestinations(this.destinations.map((destination) => new _MoneroDestination.default(destination)));
    }

    // alias 'address' and 'amount' to single destination to support e.g. createTx({address: "..."})
    if (this.address || this.amount) {
      (0, _assert.default)(!this.destinations, "Tx configuration may specify destinations or an address/amount but not both");
      this.setAddress(this.address);
      this.setAmount(this.amount);
      delete this.address;
      delete this.amount;
    }

    // alias 'subaddressIndex' to subaddress indices
    if (this.subaddressIndex !== undefined) {
      this.setSubaddressIndices([this.subaddressIndex]);
      delete this.subaddressIndex;
    }
  }

  copy() {
    return new MoneroTxConfig(this);
  }

  toJson() {
    let json = Object.assign({}, this); // copy state
    if (this.getDestinations() !== undefined) {
      json.destinations = [];
      for (let destination of this.getDestinations()) json.destinations.push(destination.toJson());
    }
    if (this.getFee()) json.fee = this.getFee().toString();
    if (this.getUnlockTime()) json.unlockTime = this.getUnlockTime().toString();
    if (this.getBelowAmount()) json.belowAmount = this.getBelowAmount().toString();
    return json;
  }

  /**
   * Set the address of a single-destination configuration.
   * 
   * @param {string} address - the address to set for the single destination
   * @return {MoneroTxConfig} this configuration for chaining
   */
  setAddress(address) {
    if (this.destinations !== undefined && this.destinations.length > 1) throw new _MoneroError.default("Cannot set address because MoneroTxConfig already has multiple destinations");
    if (this.destinations === undefined || this.destinations.length === 0) this.addDestination(new _MoneroDestination.default(address));else
    this.destinations[0].setAddress(address);
    return this;
  }

  /**
   * Get the address of a single-destination configuration.
   * 
   * @return {string} the address of the single destination
   */
  getAddress() {
    if (this.destinations === undefined || this.destinations.length !== 1) throw new _MoneroError.default("Cannot get address because MoneroTxConfig does not have exactly one destination");
    return this.destinations[0].getAddress();
  }

  /**
   * Set the amount of a single-destination configuration.
   * 
   * @param {bigint} amount - the amount to set for the single destination
   * @return {MoneroTxConfig} this configuration for chaining
   */
  setAmount(amount) {
    if (amount !== undefined && typeof this.amount !== "bigint") {
      if (typeof amount === "number") throw new _MoneroError.default("Destination amount must be bigint or string");
      try {amount = BigInt(amount);}
      catch (err) {throw new _MoneroError.default("Invalid destination amount: " + amount);}
    }
    if (this.destinations !== undefined && this.destinations.length > 1) throw new _MoneroError.default("Cannot set amount because MoneroTxConfig already has multiple destinations");
    if (this.destinations === undefined || this.destinations.length === 0) this.addDestination(new _MoneroDestination.default(undefined, amount));else
    this.destinations[0].setAmount(amount);
    return this;
  }

  /**
   * Get the amount of a single-destination configuration.
   * 
   * @return {bigint} the amount of the single destination
   */
  getAmount() {
    if (this.destinations === undefined || this.destinations.length !== 1) throw new _MoneroError.default("Cannot get amount because MoneroTxConfig does not have exactly one destination");
    return this.destinations[0].getAmount();
  }

  addDestination(destinationOrAddress, amount) {
    if (typeof destinationOrAddress === "string") return this.addDestination(new _MoneroDestination.default(destinationOrAddress, amount));
    (0, _assert.default)(destinationOrAddress instanceof _MoneroDestination.default);
    if (this.destinations === undefined) this.destinations = [];
    this.destinations.push(destinationOrAddress);
    return this;
  }

  getDestinations() {
    return this.destinations;
  }

  setDestinations(destinations) {
    if (arguments.length > 1) destinations = Array.from(arguments);
    this.destinations = destinations;
    return this;
  }

  setDestination(destination) {
    return this.setDestinations(destination ? [destination] : undefined);
  }

  getSubtractFeeFrom() {
    return this.subtractFeeFrom;
  }

  setSubtractFeeFrom(destinationIndices) {
    if (arguments.length > 1) destinationIndices = Array.from(arguments);
    this.subtractFeeFrom = destinationIndices;
    return this;
  }

  getPaymentId() {
    return this.paymentId;
  }

  setPaymentId(paymentId) {
    this.paymentId = paymentId;
    return this;
  }

  getPriority() {
    return this.priority;
  }

  setPriority(priority) {
    this.priority = priority;
    return this;
  }

  getFee() {
    return this.fee;
  }

  setFee(fee) {
    this.fee = fee;
    return this;
  }

  getAccountIndex() {
    return this.accountIndex;
  }

  setAccountIndex(accountIndex) {
    this.accountIndex = accountIndex;
    return this;
  }

  setSubaddressIndex(subaddressIndex) {
    this.setSubaddressIndices([subaddressIndex]);
    return this;
  }

  getSubaddressIndices() {
    return this.subaddressIndices;
  }

  setSubaddressIndices(subaddressIndices) {
    if (arguments.length > 1) subaddressIndices = Array.from(arguments);
    this.subaddressIndices = subaddressIndices;
    return this;
  }

  getUnlockTime() {
    return this.unlockTime;
  }

  setUnlockTime(unlockTime) {
    this.unlockTime = unlockTime;
    return this;
  }

  getRelay() {
    return this.relay;
  }

  setRelay(relay) {
    this.relay = relay;
    return this;
  }

  getCanSplit() {
    return this.canSplit;
  }

  setCanSplit(canSplit) {
    this.canSplit = canSplit;
    return this;
  }

  getNote() {
    return this.note;
  }

  setNote(note) {
    this.note = note;
    return this;
  }

  getRecipientName() {
    return this.recipientName;
  }

  setRecipientName(recipientName) {
    this.recipientName = recipientName;
    return this;
  }

  // --------------------------- SPECIFIC TO SWEEP ----------------------------

  getBelowAmount() {
    return this.belowAmount;
  }

  setBelowAmount(belowAmount) {
    this.belowAmount = belowAmount;
    return this;
  }

  getSweepEachSubaddress() {
    return this.sweepEachSubaddress;
  }

  setSweepEachSubaddress(sweepEachSubaddress) {
    this.sweepEachSubaddress = sweepEachSubaddress;
    return this;
  }

  /**
   * Get the key image hex of the output to sweep.
   * 
   * return {string} is the key image hex of the output to sweep
   */
  getKeyImage() {
    return this.keyImage;
  }

  /**
   * Set the key image hex of the output to sweep.
   * 
   * @param {string} keyImage is the key image hex of the output to sweep
   */
  setKeyImage(keyImage) {
    this.keyImage = keyImage;
    return this;
  }
}exports.default = MoneroTxConfig;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYXNzZXJ0IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfTW9uZXJvRGVzdGluYXRpb24iLCJfTW9uZXJvRXJyb3IiLCJNb25lcm9UeENvbmZpZyIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwiT2JqZWN0IiwiYXNzaWduIiwiYW1vdW50IiwidW5kZWZpbmVkIiwiQmlnSW50IiwiZmVlIiwidW5sb2NrVGltZSIsImJlbG93QW1vdW50IiwiZGVzdGluYXRpb25zIiwiYXNzZXJ0IiwiYWRkcmVzcyIsInNldERlc3RpbmF0aW9ucyIsIm1hcCIsImRlc3RpbmF0aW9uIiwiTW9uZXJvRGVzdGluYXRpb24iLCJzZXRBZGRyZXNzIiwic2V0QW1vdW50Iiwic3ViYWRkcmVzc0luZGV4Iiwic2V0U3ViYWRkcmVzc0luZGljZXMiLCJjb3B5IiwidG9Kc29uIiwianNvbiIsImdldERlc3RpbmF0aW9ucyIsInB1c2giLCJnZXRGZWUiLCJ0b1N0cmluZyIsImdldFVubG9ja1RpbWUiLCJnZXRCZWxvd0Ftb3VudCIsImxlbmd0aCIsIk1vbmVyb0Vycm9yIiwiYWRkRGVzdGluYXRpb24iLCJnZXRBZGRyZXNzIiwiZXJyIiwiZ2V0QW1vdW50IiwiZGVzdGluYXRpb25PckFkZHJlc3MiLCJhcmd1bWVudHMiLCJBcnJheSIsImZyb20iLCJzZXREZXN0aW5hdGlvbiIsImdldFN1YnRyYWN0RmVlRnJvbSIsInN1YnRyYWN0RmVlRnJvbSIsInNldFN1YnRyYWN0RmVlRnJvbSIsImRlc3RpbmF0aW9uSW5kaWNlcyIsImdldFBheW1lbnRJZCIsInBheW1lbnRJZCIsInNldFBheW1lbnRJZCIsImdldFByaW9yaXR5IiwicHJpb3JpdHkiLCJzZXRQcmlvcml0eSIsInNldEZlZSIsImdldEFjY291bnRJbmRleCIsImFjY291bnRJbmRleCIsInNldEFjY291bnRJbmRleCIsInNldFN1YmFkZHJlc3NJbmRleCIsImdldFN1YmFkZHJlc3NJbmRpY2VzIiwic3ViYWRkcmVzc0luZGljZXMiLCJzZXRVbmxvY2tUaW1lIiwiZ2V0UmVsYXkiLCJyZWxheSIsInNldFJlbGF5IiwiZ2V0Q2FuU3BsaXQiLCJjYW5TcGxpdCIsInNldENhblNwbGl0IiwiZ2V0Tm90ZSIsIm5vdGUiLCJzZXROb3RlIiwiZ2V0UmVjaXBpZW50TmFtZSIsInJlY2lwaWVudE5hbWUiLCJzZXRSZWNpcGllbnROYW1lIiwic2V0QmVsb3dBbW91bnQiLCJnZXRTd2VlcEVhY2hTdWJhZGRyZXNzIiwic3dlZXBFYWNoU3ViYWRkcmVzcyIsInNldFN3ZWVwRWFjaFN1YmFkZHJlc3MiLCJnZXRLZXlJbWFnZSIsImtleUltYWdlIiwic2V0S2V5SW1hZ2UiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9tYWluL3RzL3dhbGxldC9tb2RlbC9Nb25lcm9UeENvbmZpZy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXNzZXJ0IGZyb20gXCJhc3NlcnRcIjtcbmltcG9ydCBNb25lcm9EZXN0aW5hdGlvbiBmcm9tIFwiLi9Nb25lcm9EZXN0aW5hdGlvblwiO1xuaW1wb3J0IE1vbmVyb0Vycm9yIGZyb20gXCIuLi8uLi9jb21tb24vTW9uZXJvRXJyb3JcIjtcblxuLyoqXG4gKiBDb25maWd1cmVzIGEgdHJhbnNhY3Rpb24gdG8gc2VuZCwgc3dlZXAsIG9yIGNyZWF0ZSBhIHBheW1lbnQgVVJJLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb25lcm9UeENvbmZpZyB7XG5cbiAgYWRkcmVzczogc3RyaW5nO1xuICBhbW91bnQ6IGJpZ2ludDtcbiAgYWNjb3VudEluZGV4OiBudW1iZXI7XG4gIHN1YmFkZHJlc3NJbmRleDogbnVtYmVyO1xuICBzdWJhZGRyZXNzSW5kaWNlczogbnVtYmVyW107XG4gIHJlbGF5OiBib29sZWFuO1xuICBwcmlvcml0eTogbnVtYmVyO1xuICBkZXN0aW5hdGlvbnM6IFBhcnRpYWw8TW9uZXJvRGVzdGluYXRpb24+W107XG4gIHN1YnRyYWN0RmVlRnJvbTogbnVtYmVyW107XG4gIHBheW1lbnRJZDogc3RyaW5nO1xuICB1bmxvY2tUaW1lOiBiaWdpbnQ7XG4gIGZlZTogYmlnaW50O1xuICBub3RlOiBzdHJpbmc7XG4gIHJlY2lwaWVudE5hbWU6IHN0cmluZztcbiAgY2FuU3BsaXQ6IGJvb2xlYW47XG4gIGJlbG93QW1vdW50OiBiaWdpbnQ7XG4gIHN3ZWVwRWFjaFN1YmFkZHJlc3M6IGJvb2xlYW47XG4gIGtleUltYWdlOiBzdHJpbmc7XG4gIFxuICAvKipcbiAgICogPHA+R2VuZXJpYyByZXF1ZXN0IHRvIHRyYW5zZmVyIGZ1bmRzIGZyb20gYSB3YWxsZXQuPC9wPlxuICAgKiBcbiAgICogPHA+RXhhbXBsZTo8L3A+XG4gICAqIFxuICAgKiA8Y29kZT5cbiAgICogbGV0IGNvbmZpZzEgPSBuZXcgTW9uZXJvVHhDb25maWcoezxicj5cbiAgICogJm5ic3A7Jm5ic3A7IGFjY291bnRJbmRleDogMCw8YnI+XG4gICAqICZuYnNwOyZuYnNwOyBhZGRyZXNzOiBcIjU5YVpVTHNVRjNZTi4uLlwiLDxicj5cbiAgICogJm5ic3A7Jm5ic3A7IGFtb3VudDogQmlnSW50KFwiNTAwMDAwXCIpLDxicj5cbiAgICogJm5ic3A7Jm5ic3A7IHByaW9yaXR5OiBNb25lcm9UeFByaW9yaXR5Lk5PUk1BTCw8YnI+XG4gICAqICZuYnNwOyZuYnNwOyByZWxheTogdHJ1ZTxicj5cbiAgICogfSk7XG4gICAqIDwvY29kZT5cbiAgICogXG4gICAqIEBwYXJhbSB7UGFydGlhbDxNb25lcm9UeENvbmZpZz59IFtjb25maWddIC0gY29uZmlndXJlcyB0aGUgdHJhbnNhY3Rpb24gdG8gY3JlYXRlIChvcHRpb25hbClcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtjb25maWcuYWRkcmVzc10gLSBzaW5nbGUgZGVzdGluYXRpb24gYWRkcmVzc1xuICAgKiBAcGFyYW0ge2JpZ2ludH0gW2NvbmZpZy5hbW91bnRdIC0gc2luZ2xlIGRlc3RpbmF0aW9uIGFtb3VudFxuICAgKiBAcGFyYW0ge251bWJlcn0gW2NvbmZpZy5hY2NvdW50SW5kZXhdIC0gc291cmNlIGFjY291bnQgaW5kZXggdG8gdHJhbnNmZXIgZnVuZHMgZnJvbVxuICAgKiBAcGFyYW0ge251bWJlcn0gW2NvbmZpZy5zdWJhZGRyZXNzSW5kZXhdIC0gc291cmNlIHN1YmFkZHJlc3MgaW5kZXggdG8gdHJhbnNmZXIgZnVuZHMgZnJvbVxuICAgKiBAcGFyYW0ge251bWJlcltdfSBbY29uZmlnLnN1YmFkZHJlc3NJbmRpY2VzXSAtIHNvdXJjZSBzdWJhZGRyZXNzIGluZGljZXMgdG8gdHJhbnNmZXIgZnVuZHMgZnJvbVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtjb25maWcucmVsYXldIC0gcmVsYXkgdGhlIHRyYW5zYWN0aW9uIHRvIHBlZXJzIHRvIGNvbW1pdCB0byB0aGUgYmxvY2tjaGFpblxuICAgKiBAcGFyYW0ge01vbmVyb1R4UHJpb3JpdHl9IFtjb25maWcucHJpb3JpdHldIC0gdHJhbnNhY3Rpb24gcHJpb3JpdHkgKGRlZmF1bHQgTW9uZXJvVHhQcmlvcml0eS5OT1JNQUwpXG4gICAqIEBwYXJhbSB7TW9uZXJvRGVzdGluYXRpb25bXX0gW2NvbmZpZy5kZXN0aW5hdGlvbnNdIC0gYWRkcmVzc2VzIGFuZCBhbW91bnRzIGluIGEgbXVsdGktZGVzdGluYXRpb24gdHhcbiAgICogQHBhcmFtIHtudW1iZXJbXX0gW2NvbmZpZy5zdWJ0cmFjdEZlZUZyb21dIC0gbGlzdCBvZiBkZXN0aW5hdGlvbiBpbmRpY2VzIHRvIHNwbGl0IHRoZSB0cmFuc2FjdGlvbiBmZWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtjb25maWcucGF5bWVudElkXSAtIHRyYW5zYWN0aW9uIHBheW1lbnQgSURcbiAgICogQHBhcmFtIHtiaWdpbnR9IFtjb25maWcudW5sb2NrVGltZV0gLSBtaW5pbXVtIGhlaWdodCBvciB0aW1lc3RhbXAgZm9yIHRoZSB0cmFuc2FjdGlvbiB0byB1bmxvY2sgKGRlZmF1bHQgMClcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtjb25maWcubm90ZV0gLSB0cmFuc2FjdGlvbiBub3RlIHNhdmVkIGxvY2FsbHkgd2l0aCB0aGUgd2FsbGV0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbY29uZmlnLnJlY2lwaWVudE5hbWVdIC0gcmVjaXBpZW50IG5hbWUgc2F2ZWQgbG9jYWxseSB3aXRoIHRoZSB3YWxsZXRcbiAgICogQHBhcmFtIHtib29sZWFufSBbY29uZmlnLmNhblNwbGl0XSAtIGFsbG93IGZ1bmRzIHRvIGJlIHRyYW5zZmVycmVkIHVzaW5nIG11bHRpcGxlIHRyYW5zYWN0aW9uc1xuICAgKiBAcGFyYW0ge2JpZ2ludH0gW2NvbmZpZy5iZWxvd0Ftb3VudF0gLSBmb3Igc3dlZXAgcmVxdWVzdHMsIGluY2x1ZGUgb3V0cHV0cyBiZWxvdyB0aGlzIGFtb3VudCB3aGVuIHN3ZWVwaW5nIHdhbGxldCwgYWNjb3VudCwgc3ViYWRkcmVzcywgb3IgYWxsIHVubG9ja2VkIGZ1bmRzIFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtjb25maWcuc3dlZXBFYWNoU3ViYWRkcmVzc10gLSBmb3Igc3dlZXAgcmVxdWVzdHMsIHN3ZWVwIGVhY2ggc3ViYWRkcmVzcyBpbmRpdmlkdWFsbHkgaW5zdGVhZCBvZiB0b2dldGhlciBpZiB0cnVlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbY29uZmlnLmtleUltYWdlXSAtIGtleSBpbWFnZSB0byBzd2VlcCAoaWdub3JlZCBleGNlcHQgaW4gc3dlZXBPdXRwdXQoKSByZXF1ZXN0cylcbiAgICovXG4gIGNvbnN0cnVjdG9yKGNvbmZpZz86IFBhcnRpYWw8TW9uZXJvVHhDb25maWc+KSB7XG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLCBjb25maWcpO1xuXG4gICAgLy8gZGVzZXJpYWxpemUgYmlnaW50c1xuICAgIGlmICh0aGlzLmFtb3VudCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiB0aGlzLmFtb3VudCAhPT0gXCJiaWdpbnRcIikgdGhpcy5hbW91bnQgPSBCaWdJbnQodGhpcy5hbW91bnQpO1xuICAgIGlmICh0aGlzLmZlZSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiB0aGlzLmZlZSAhPT0gXCJiaWdpbnRcIikgdGhpcy5mZWUgPSBCaWdJbnQodGhpcy5mZWUpO1xuICAgIGlmICh0aGlzLnVubG9ja1RpbWUgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgdGhpcy51bmxvY2tUaW1lICE9PSBcImJpZ2ludFwiKSB0aGlzLnVubG9ja1RpbWUgPSBCaWdJbnQodGhpcy51bmxvY2tUaW1lKTtcbiAgICBpZiAodGhpcy5iZWxvd0Ftb3VudCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiB0aGlzLmJlbG93QW1vdW50ICE9PSBcImJpZ2ludFwiKSB0aGlzLmJlbG93QW1vdW50ID0gQmlnSW50KHRoaXMuYmVsb3dBbW91bnQpO1xuXG4gICAgLy8gY29weSBkZXN0aW5hdGlvbnNcbiAgICBpZiAodGhpcy5kZXN0aW5hdGlvbnMpIHtcbiAgICAgIGFzc2VydCh0aGlzLmFkZHJlc3MgPT09IHVuZGVmaW5lZCAmJiB0aGlzLmFtb3VudCA9PT0gdW5kZWZpbmVkLCBcIlR4IGNvbmZpZ3VyYXRpb24gbWF5IHNwZWNpZnkgZGVzdGluYXRpb25zIG9yIGFuIGFkZHJlc3MvYW1vdW50IGJ1dCBub3QgYm90aFwiKTtcbiAgICAgIHRoaXMuc2V0RGVzdGluYXRpb25zKHRoaXMuZGVzdGluYXRpb25zLm1hcChkZXN0aW5hdGlvbiA9PiBuZXcgTW9uZXJvRGVzdGluYXRpb24oZGVzdGluYXRpb24pKSk7XG4gICAgfVxuICAgIFxuICAgIC8vIGFsaWFzICdhZGRyZXNzJyBhbmQgJ2Ftb3VudCcgdG8gc2luZ2xlIGRlc3RpbmF0aW9uIHRvIHN1cHBvcnQgZS5nLiBjcmVhdGVUeCh7YWRkcmVzczogXCIuLi5cIn0pXG4gICAgaWYgKHRoaXMuYWRkcmVzcyB8fCB0aGlzLmFtb3VudCkge1xuICAgICAgYXNzZXJ0KCF0aGlzLmRlc3RpbmF0aW9ucywgXCJUeCBjb25maWd1cmF0aW9uIG1heSBzcGVjaWZ5IGRlc3RpbmF0aW9ucyBvciBhbiBhZGRyZXNzL2Ftb3VudCBidXQgbm90IGJvdGhcIik7XG4gICAgICB0aGlzLnNldEFkZHJlc3ModGhpcy5hZGRyZXNzKTtcbiAgICAgIHRoaXMuc2V0QW1vdW50KHRoaXMuYW1vdW50KTtcbiAgICAgIGRlbGV0ZSB0aGlzLmFkZHJlc3M7XG4gICAgICBkZWxldGUgdGhpcy5hbW91bnQ7XG4gICAgfVxuICAgIFxuICAgIC8vIGFsaWFzICdzdWJhZGRyZXNzSW5kZXgnIHRvIHN1YmFkZHJlc3MgaW5kaWNlc1xuICAgIGlmICh0aGlzLnN1YmFkZHJlc3NJbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnNldFN1YmFkZHJlc3NJbmRpY2VzKFt0aGlzLnN1YmFkZHJlc3NJbmRleF0pO1xuICAgICAgZGVsZXRlIHRoaXMuc3ViYWRkcmVzc0luZGV4O1xuICAgIH1cbiAgfVxuICBcbiAgY29weSgpOiBNb25lcm9UeENvbmZpZyB7XG4gICAgcmV0dXJuIG5ldyBNb25lcm9UeENvbmZpZyh0aGlzKTtcbiAgfVxuICBcbiAgdG9Kc29uKCk6IGFueSB7XG4gICAgbGV0IGpzb246IGFueSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMpOyAvLyBjb3B5IHN0YXRlXG4gICAgaWYgKHRoaXMuZ2V0RGVzdGluYXRpb25zKCkgIT09IHVuZGVmaW5lZCkge1xuICAgICAganNvbi5kZXN0aW5hdGlvbnMgPSBbXTtcbiAgICAgIGZvciAobGV0IGRlc3RpbmF0aW9uIG9mIHRoaXMuZ2V0RGVzdGluYXRpb25zKCkpIGpzb24uZGVzdGluYXRpb25zLnB1c2goZGVzdGluYXRpb24udG9Kc29uKCkpO1xuICAgIH1cbiAgICBpZiAodGhpcy5nZXRGZWUoKSkganNvbi5mZWUgPSB0aGlzLmdldEZlZSgpLnRvU3RyaW5nKCk7XG4gICAgaWYgKHRoaXMuZ2V0VW5sb2NrVGltZSgpKSBqc29uLnVubG9ja1RpbWUgPSB0aGlzLmdldFVubG9ja1RpbWUoKS50b1N0cmluZygpO1xuICAgIGlmICh0aGlzLmdldEJlbG93QW1vdW50KCkpIGpzb24uYmVsb3dBbW91bnQgPSB0aGlzLmdldEJlbG93QW1vdW50KCkudG9TdHJpbmcoKTtcbiAgICByZXR1cm4ganNvbjtcbiAgfVxuICBcbiAgLyoqXG4gICAqIFNldCB0aGUgYWRkcmVzcyBvZiBhIHNpbmdsZS1kZXN0aW5hdGlvbiBjb25maWd1cmF0aW9uLlxuICAgKiBcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFkZHJlc3MgLSB0aGUgYWRkcmVzcyB0byBzZXQgZm9yIHRoZSBzaW5nbGUgZGVzdGluYXRpb25cbiAgICogQHJldHVybiB7TW9uZXJvVHhDb25maWd9IHRoaXMgY29uZmlndXJhdGlvbiBmb3IgY2hhaW5pbmdcbiAgICovXG4gIHNldEFkZHJlc3MoYWRkcmVzczogc3RyaW5nKTogTW9uZXJvVHhDb25maWcge1xuICAgIGlmICh0aGlzLmRlc3RpbmF0aW9ucyAhPT0gdW5kZWZpbmVkICYmIHRoaXMuZGVzdGluYXRpb25zLmxlbmd0aCA+IDEpIHRocm93IG5ldyBNb25lcm9FcnJvcihcIkNhbm5vdCBzZXQgYWRkcmVzcyBiZWNhdXNlIE1vbmVyb1R4Q29uZmlnIGFscmVhZHkgaGFzIG11bHRpcGxlIGRlc3RpbmF0aW9uc1wiKTtcbiAgICBpZiAodGhpcy5kZXN0aW5hdGlvbnMgPT09IHVuZGVmaW5lZCB8fCB0aGlzLmRlc3RpbmF0aW9ucy5sZW5ndGggPT09IDApIHRoaXMuYWRkRGVzdGluYXRpb24obmV3IE1vbmVyb0Rlc3RpbmF0aW9uKGFkZHJlc3MpKTtcbiAgICBlbHNlICh0aGlzLmRlc3RpbmF0aW9uc1swXSBhcyBNb25lcm9EZXN0aW5hdGlvbikuc2V0QWRkcmVzcyhhZGRyZXNzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgLyoqXG4gICAqIEdldCB0aGUgYWRkcmVzcyBvZiBhIHNpbmdsZS1kZXN0aW5hdGlvbiBjb25maWd1cmF0aW9uLlxuICAgKiBcbiAgICogQHJldHVybiB7c3RyaW5nfSB0aGUgYWRkcmVzcyBvZiB0aGUgc2luZ2xlIGRlc3RpbmF0aW9uXG4gICAqL1xuICBnZXRBZGRyZXNzKCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMuZGVzdGluYXRpb25zID09PSB1bmRlZmluZWQgfHwgdGhpcy5kZXN0aW5hdGlvbnMubGVuZ3RoICE9PSAxKSB0aHJvdyBuZXcgTW9uZXJvRXJyb3IoXCJDYW5ub3QgZ2V0IGFkZHJlc3MgYmVjYXVzZSBNb25lcm9UeENvbmZpZyBkb2VzIG5vdCBoYXZlIGV4YWN0bHkgb25lIGRlc3RpbmF0aW9uXCIpO1xuICAgIHJldHVybiAodGhpcy5kZXN0aW5hdGlvbnNbMF0gYXMgTW9uZXJvRGVzdGluYXRpb24pLmdldEFkZHJlc3MoKTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIFNldCB0aGUgYW1vdW50IG9mIGEgc2luZ2xlLWRlc3RpbmF0aW9uIGNvbmZpZ3VyYXRpb24uXG4gICAqIFxuICAgKiBAcGFyYW0ge2JpZ2ludH0gYW1vdW50IC0gdGhlIGFtb3VudCB0byBzZXQgZm9yIHRoZSBzaW5nbGUgZGVzdGluYXRpb25cbiAgICogQHJldHVybiB7TW9uZXJvVHhDb25maWd9IHRoaXMgY29uZmlndXJhdGlvbiBmb3IgY2hhaW5pbmdcbiAgICovXG4gIHNldEFtb3VudChhbW91bnQ6IGJpZ2ludCk6IE1vbmVyb1R4Q29uZmlnIHtcbiAgICBpZiAoYW1vdW50ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHRoaXMuYW1vdW50ICE9PSBcImJpZ2ludFwiKSB7XG4gICAgICBpZiAodHlwZW9mIGFtb3VudCA9PT0gXCJudW1iZXJcIikgdGhyb3cgbmV3IE1vbmVyb0Vycm9yKFwiRGVzdGluYXRpb24gYW1vdW50IG11c3QgYmUgYmlnaW50IG9yIHN0cmluZ1wiKTtcbiAgICAgIHRyeSB7IGFtb3VudCA9IEJpZ0ludChhbW91bnQpOyB9XG4gICAgICBjYXRjaCAoZXJyKSB7IHRocm93IG5ldyBNb25lcm9FcnJvcihcIkludmFsaWQgZGVzdGluYXRpb24gYW1vdW50OiBcIiArIGFtb3VudCk7IH1cbiAgICB9XG4gICAgaWYgKHRoaXMuZGVzdGluYXRpb25zICE9PSB1bmRlZmluZWQgJiYgdGhpcy5kZXN0aW5hdGlvbnMubGVuZ3RoID4gMSkgdGhyb3cgbmV3IE1vbmVyb0Vycm9yKFwiQ2Fubm90IHNldCBhbW91bnQgYmVjYXVzZSBNb25lcm9UeENvbmZpZyBhbHJlYWR5IGhhcyBtdWx0aXBsZSBkZXN0aW5hdGlvbnNcIik7XG4gICAgaWYgKHRoaXMuZGVzdGluYXRpb25zID09PSB1bmRlZmluZWQgfHwgdGhpcy5kZXN0aW5hdGlvbnMubGVuZ3RoID09PSAwKSB0aGlzLmFkZERlc3RpbmF0aW9uKG5ldyBNb25lcm9EZXN0aW5hdGlvbih1bmRlZmluZWQsIGFtb3VudCkpO1xuICAgIGVsc2UgKHRoaXMuZGVzdGluYXRpb25zWzBdIGFzIE1vbmVyb0Rlc3RpbmF0aW9uKS5zZXRBbW91bnQoYW1vdW50KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgLyoqXG4gICAqIEdldCB0aGUgYW1vdW50IG9mIGEgc2luZ2xlLWRlc3RpbmF0aW9uIGNvbmZpZ3VyYXRpb24uXG4gICAqIFxuICAgKiBAcmV0dXJuIHtiaWdpbnR9IHRoZSBhbW91bnQgb2YgdGhlIHNpbmdsZSBkZXN0aW5hdGlvblxuICAgKi9cbiAgZ2V0QW1vdW50KCk6IGJpZ2ludCB7XG4gICAgaWYgKHRoaXMuZGVzdGluYXRpb25zID09PSB1bmRlZmluZWQgfHwgdGhpcy5kZXN0aW5hdGlvbnMubGVuZ3RoICE9PSAxKSB0aHJvdyBuZXcgTW9uZXJvRXJyb3IoXCJDYW5ub3QgZ2V0IGFtb3VudCBiZWNhdXNlIE1vbmVyb1R4Q29uZmlnIGRvZXMgbm90IGhhdmUgZXhhY3RseSBvbmUgZGVzdGluYXRpb25cIik7XG4gICAgcmV0dXJuICh0aGlzLmRlc3RpbmF0aW9uc1swXSBhcyBNb25lcm9EZXN0aW5hdGlvbikuZ2V0QW1vdW50KCk7XG4gIH1cbiAgXG4gIGFkZERlc3RpbmF0aW9uKGRlc3RpbmF0aW9uT3JBZGRyZXNzOiBNb25lcm9EZXN0aW5hdGlvbiB8IHN0cmluZywgYW1vdW50PzogYmlnaW50KSB7XG4gICAgaWYgKHR5cGVvZiBkZXN0aW5hdGlvbk9yQWRkcmVzcyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHRoaXMuYWRkRGVzdGluYXRpb24obmV3IE1vbmVyb0Rlc3RpbmF0aW9uKGRlc3RpbmF0aW9uT3JBZGRyZXNzLCBhbW91bnQpKTtcbiAgICBhc3NlcnQoZGVzdGluYXRpb25PckFkZHJlc3MgaW5zdGFuY2VvZiBNb25lcm9EZXN0aW5hdGlvbik7XG4gICAgaWYgKHRoaXMuZGVzdGluYXRpb25zID09PSB1bmRlZmluZWQpIHRoaXMuZGVzdGluYXRpb25zID0gW107XG4gICAgdGhpcy5kZXN0aW5hdGlvbnMucHVzaChkZXN0aW5hdGlvbk9yQWRkcmVzcyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIGdldERlc3RpbmF0aW9ucygpOiBNb25lcm9EZXN0aW5hdGlvbltdIHtcbiAgICByZXR1cm4gdGhpcy5kZXN0aW5hdGlvbnMgYXMgTW9uZXJvRGVzdGluYXRpb25bXTtcbiAgfVxuICBcbiAgc2V0RGVzdGluYXRpb25zKGRlc3RpbmF0aW9uczogTW9uZXJvRGVzdGluYXRpb25bXSk6IE1vbmVyb1R4Q29uZmlnIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIGRlc3RpbmF0aW9ucyA9IEFycmF5LmZyb20oYXJndW1lbnRzKTtcbiAgICB0aGlzLmRlc3RpbmF0aW9ucyA9IGRlc3RpbmF0aW9ucztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgc2V0RGVzdGluYXRpb24oZGVzdGluYXRpb246IE1vbmVyb0Rlc3RpbmF0aW9uKTogTW9uZXJvVHhDb25maWcge1xuICAgIHJldHVybiB0aGlzLnNldERlc3RpbmF0aW9ucyhkZXN0aW5hdGlvbiA/IFtkZXN0aW5hdGlvbl0gOiB1bmRlZmluZWQpO1xuICB9XG5cbiAgZ2V0U3VidHJhY3RGZWVGcm9tKCk6IG51bWJlcltdIHtcbiAgICByZXR1cm4gdGhpcy5zdWJ0cmFjdEZlZUZyb207XG4gIH1cblxuICBzZXRTdWJ0cmFjdEZlZUZyb20oZGVzdGluYXRpb25JbmRpY2VzOiBudW1iZXJbXSk6IE1vbmVyb1R4Q29uZmlnIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIGRlc3RpbmF0aW9uSW5kaWNlcyA9IEFycmF5LmZyb20oYXJndW1lbnRzKTtcbiAgICB0aGlzLnN1YnRyYWN0RmVlRnJvbSA9IGRlc3RpbmF0aW9uSW5kaWNlcztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgZ2V0UGF5bWVudElkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMucGF5bWVudElkO1xuICB9XG4gIFxuICBzZXRQYXltZW50SWQocGF5bWVudElkOiBzdHJpbmcpOiBNb25lcm9UeENvbmZpZyB7XG4gICAgdGhpcy5wYXltZW50SWQgPSBwYXltZW50SWQ7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIGdldFByaW9yaXR5KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMucHJpb3JpdHk7XG4gIH1cbiAgXG4gIHNldFByaW9yaXR5KHByaW9yaXR5OiBudW1iZXIpOiBNb25lcm9UeENvbmZpZyB7XG4gICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBnZXRGZWUoKTogYmlnaW50IHtcbiAgICByZXR1cm4gdGhpcy5mZWU7XG4gIH1cbiAgXG4gIHNldEZlZShmZWU6IGJpZ2ludCk6IE1vbmVyb1R4Q29uZmlnIHtcbiAgICB0aGlzLmZlZSA9IGZlZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgZ2V0QWNjb3VudEluZGV4KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuYWNjb3VudEluZGV4O1xuICB9XG4gIFxuICBzZXRBY2NvdW50SW5kZXgoYWNjb3VudEluZGV4OiBudW1iZXIpOiBNb25lcm9UeENvbmZpZyB7XG4gICAgdGhpcy5hY2NvdW50SW5kZXggPSBhY2NvdW50SW5kZXg7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIHNldFN1YmFkZHJlc3NJbmRleChzdWJhZGRyZXNzSW5kZXg6IG51bWJlcik6IE1vbmVyb1R4Q29uZmlnIHtcbiAgICB0aGlzLnNldFN1YmFkZHJlc3NJbmRpY2VzKFtzdWJhZGRyZXNzSW5kZXhdKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgZ2V0U3ViYWRkcmVzc0luZGljZXMoKTogbnVtYmVyW10ge1xuICAgIHJldHVybiB0aGlzLnN1YmFkZHJlc3NJbmRpY2VzO1xuICB9XG4gIFxuICBzZXRTdWJhZGRyZXNzSW5kaWNlcyhzdWJhZGRyZXNzSW5kaWNlczogbnVtYmVyW10pOiBNb25lcm9UeENvbmZpZyB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSBzdWJhZGRyZXNzSW5kaWNlcyA9IEFycmF5LmZyb20oYXJndW1lbnRzKTtcbiAgICB0aGlzLnN1YmFkZHJlc3NJbmRpY2VzID0gc3ViYWRkcmVzc0luZGljZXM7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIGdldFVubG9ja1RpbWUoKTogYmlnaW50IHtcbiAgICByZXR1cm4gdGhpcy51bmxvY2tUaW1lO1xuICB9XG4gIFxuICBzZXRVbmxvY2tUaW1lKHVubG9ja1RpbWU6IGJpZ2ludCk6IE1vbmVyb1R4Q29uZmlnIHtcbiAgICB0aGlzLnVubG9ja1RpbWUgPSB1bmxvY2tUaW1lO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBnZXRSZWxheSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5yZWxheTtcbiAgfVxuICBcbiAgc2V0UmVsYXkocmVsYXk6IGJvb2xlYW4pOiBNb25lcm9UeENvbmZpZyB7XG4gICAgdGhpcy5yZWxheSA9IHJlbGF5O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBnZXRDYW5TcGxpdCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jYW5TcGxpdDtcbiAgfVxuICBcbiAgc2V0Q2FuU3BsaXQoY2FuU3BsaXQ6IGJvb2xlYW4pOiBNb25lcm9UeENvbmZpZyB7XG4gICAgdGhpcy5jYW5TcGxpdCA9IGNhblNwbGl0O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBnZXROb3RlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMubm90ZTtcbiAgfVxuICBcbiAgc2V0Tm90ZShub3RlOiBzdHJpbmcpOiBNb25lcm9UeENvbmZpZyB7XG4gICAgdGhpcy5ub3RlID0gbm90ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgZ2V0UmVjaXBpZW50TmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLnJlY2lwaWVudE5hbWU7XG4gIH1cbiAgXG4gIHNldFJlY2lwaWVudE5hbWUocmVjaXBpZW50TmFtZTogc3RyaW5nKTogTW9uZXJvVHhDb25maWcge1xuICAgIHRoaXMucmVjaXBpZW50TmFtZSA9IHJlY2lwaWVudE5hbWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBTUEVDSUZJQyBUTyBTV0VFUCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIFxuICBnZXRCZWxvd0Ftb3VudCgpIHtcbiAgICByZXR1cm4gdGhpcy5iZWxvd0Ftb3VudDtcbiAgfVxuICBcbiAgc2V0QmVsb3dBbW91bnQoYmVsb3dBbW91bnQpIHtcbiAgICB0aGlzLmJlbG93QW1vdW50ID0gYmVsb3dBbW91bnQ7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIGdldFN3ZWVwRWFjaFN1YmFkZHJlc3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3dlZXBFYWNoU3ViYWRkcmVzcztcbiAgfVxuICBcbiAgc2V0U3dlZXBFYWNoU3ViYWRkcmVzcyhzd2VlcEVhY2hTdWJhZGRyZXNzKSB7XG4gICAgdGhpcy5zd2VlcEVhY2hTdWJhZGRyZXNzID0gc3dlZXBFYWNoU3ViYWRkcmVzcztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgLyoqXG4gICAqIEdldCB0aGUga2V5IGltYWdlIGhleCBvZiB0aGUgb3V0cHV0IHRvIHN3ZWVwLlxuICAgKiBcbiAgICogcmV0dXJuIHtzdHJpbmd9IGlzIHRoZSBrZXkgaW1hZ2UgaGV4IG9mIHRoZSBvdXRwdXQgdG8gc3dlZXBcbiAgICovXG4gIGdldEtleUltYWdlKCkge1xuICAgIHJldHVybiB0aGlzLmtleUltYWdlO1xuICB9XG4gIFxuICAvKipcbiAgICogU2V0IHRoZSBrZXkgaW1hZ2UgaGV4IG9mIHRoZSBvdXRwdXQgdG8gc3dlZXAuXG4gICAqIFxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5SW1hZ2UgaXMgdGhlIGtleSBpbWFnZSBoZXggb2YgdGhlIG91dHB1dCB0byBzd2VlcFxuICAgKi9cbiAgc2V0S2V5SW1hZ2Uoa2V5SW1hZ2UpIHtcbiAgICB0aGlzLmtleUltYWdlID0ga2V5SW1hZ2U7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6InlMQUFBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLGtCQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxZQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ2UsTUFBTUcsY0FBYyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUFxQmxDO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VDLFdBQVdBLENBQUNDLE1BQWdDLEVBQUU7SUFDNUNDLE1BQU0sQ0FBQ0MsTUFBTSxDQUFDLElBQUksRUFBRUYsTUFBTSxDQUFDOztJQUUzQjtJQUNBLElBQUksSUFBSSxDQUFDRyxNQUFNLEtBQUtDLFNBQVMsSUFBSSxPQUFPLElBQUksQ0FBQ0QsTUFBTSxL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